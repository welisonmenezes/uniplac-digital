var VanillaValidator=function(){"use strict";var t=new VVElements;!function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}(s,VVChecks);var i=function(i){this.config={container:"form",button:null,validationBy:"onsubmit",novalidateHTML5:!0,validateOnFieldChanges:!0,showListOfValidations:!0,selectors:{control:"vv-control",required:"required",email:"email",integer:"integer",digit:"digit",numeric:"numeric",pattern:"pattern",phone:"phone",url:"url",date:"date",currency:"currency",cep:"cep",maxLength:"max-length",minLength:"min-length",rangeLength:"range-length",sameLength:"same-length",max:"max",min:"min",range:"range",equalTo:"equal-to",cpf:"cpf",cnpj:"cnpj",cnh:"cnh",creditCard:"credit-card",hasExtension:"has-extension",customValidate:"custom-validate",async:"async",asyncWaiting:"vv-async-waiting",error:"error",formError:"form-error",messageError:"msg-error",wrapErrors:"wrap-errors"},messages:{required:"Required field",email:"Invalid email",integer:"Needs to be a integer",digit:"Only letters and numbers",numeric:"Only  numbers",pattern:"Needs to matchs pattern",phone:"Invalid phone number",url:"Invalid url",date:"Invalid date",currency:"Invalid currency",cep:"Invalid cep",maxLength:"The amount of characters is greater than allowed",minLength:"The amount of characters is less than allowed",rangeLength:"The number of characters must be between 3 and 5",sameLength:"The value needs to have 5 characters",max:"The value needs to be less or equals to 5",min:"The value needs to be greater or equals to 3",range:"The value needs to be between 3 and 5",equalTo:"The value needs to be 10",cpf:"Invalid cpf",cnpj:"Invalid cnpj",cnh:"Invalid cnh",creditCard:"Invalid credit card number",hasExtension:"Invalid extension detected"},customValidationsConfig:{pattern:"[0-9]",flags:"g",maxLength:5,minLength:5,sameLength:5,rangeLength:{min:3,max:5},max:5,min:3,range:{max:5,min:3},equalTo:10,extensions:["jpg","png"]},callbacks:{eachFieldError:null,eachFieldSuccess:null,requiredError:null,requiredSuccess:null,emailError:null,emailSuccess:null,integerError:null,integerSuccess:null,digitError:null,digitSuccess:null,numericError:null,numericSuccess:null,phoneError:null,phoneSuccess:null,urlError:null,urlSuccess:null,dateError:null,dateSuccess:null,currencyError:null,currencySuccess:null,cepError:null,cepSuccess:null,maxLengthError:null,maxLengthSuccess:null,minLengthError:null,minLengthSuccess:null,rangeLengthError:null,rangeLengthSuccess:null,sameLengthError:null,sameLengthSuccess:null,maxError:null,maxSuccess:null,minError:null,minSuccess:null,rangeError:null,rangeSuccess:null,equalToError:null,equalToSuccess:null,cpfError:null,cpfSuccess:null,cnpjError:null,cnpjSuccess:null,cnhError:null,cnhSuccess:null,creditCardSuccess:null,creditCardError:null,hasExtensionSuccess:null,hasExtensionError:null,patternError:null,patternSuccess:null,beforeValidate:null,afterValidate:null,error:null,success:null},customValidates:{"equal-anchored-field":{message:"The value needs to be equal",fn:function(i,s){var e=i.getAttribute("data-anchored-field");if(e){var a=t.getChild(e,s);if(a&&i.value!==a.value)return!1}return!0}},"different-anchored-field":{message:"The value needs to be different",fn:function(i,s){var e=i.getAttribute("data-anchored-field");if(e){var a=t.getChild(e,s);if(a&&i.value===a.value)return!1}return!0}}},asyncValidates:{"async-validation-example":{message:"The async validation message",fn:function(t,i,s){var e=this;this.asyncValidationStart(t,"validando",s),setTimeout(function(){if(t){var a="foo"===t.value;e.asyncValidationFinish(t,i,s,a)}},2e3)}}},customViewErrors:{add:null,remove:null},customListErrors:{add:null,remove:null},onContainerSuccess:null,onFormSubmit:null},this.config=this.mergeObjectsDeeply({},this.config,i)};function s(t){if(this.userConfig=t,!(this instanceof s))throw new TypeError("Cannot call a class as a function");VVChecks.apply(this,arguments),i.apply(this,[t]),this.init()}return s.prototype.loopThroughContainers=function(){if(this.containers&&this.containers.length){var t,i,s=this.containers.length;for(t=0;t<s;t++)i=this.containers[t],this.defineSubmitionType(i),this.setHTML5NoValidate(i),this.addControlClassesOnFields(i)}},s.prototype.defineSubmitionType=function(t){"onclick"===this.config.validationBy?this.addButtonClickEvent(t):this.addFormSubmitEvent(t)},s.prototype.addFormSubmitEvent=function(t){var i=this;this.isHTMLForm(t)&&t.addEventListener("submit",function(s){s.preventDefault(),i.onSuccessFormValidate(t)})},s.prototype.addButtonClickEvent=function(i){var s,e=this;(s=this.config.button&&t.getChild(this.config.button,i)?t.getChild(this.config.button,i):t.getButtonSubmit(i))&&s.addEventListener("click",function(t){t.preventDefault(),e.onSuccessFormValidate(i)})},s.prototype.onSuccessFormValidate=function(t){t&&this.formValidateFinal(t)&&(this.isHTMLForm(t)?this.config.onFormSubmit&&this.isFunction(this.config.onFormSubmit)?this.config.onFormSubmit.call(this,t):t.submit():this.config.onContainerSuccess&&this.isFunction(this.config.onContainerSuccess)&&this.config.onContainerSuccess.call(this,t))},s.prototype.formValidateFinal=function(t){var i;return this.callCallbackFunction(this.config.callbacks.beforeValidate,this,t),i=this.validateContainer(t),this.callCallbackFunction(this.config.callbacks.afterValidate,this,t),i?this.callCallbackFunction(this.config.callbacks.success,this,t):this.callCallbackFunction(this.config.callbacks.error,this,t),i},s.prototype.validateContainer=function(i){var s=!0;if(i){t.removeClass(i,this.config.selectors.formError),this.config.showListOfValidations&&this.removeListOfValidations(i);var e=t.getChildren("."+this.config.selectors.control,i);if(e){var a,n,o=e.length;for(a=0;a<o;a++)n=e[a],this.validateAsync(n,i,!0),this.validateFields(n,i,!0)||(t.addClass(i,this.config.selectors.formError),s=!1)}}return i.getAttribute("data-validation-status")&&"valid"!==i.getAttribute("data-validation-status")&&(t.addClass(i,this.config.selectors.formError),s=!1),s},s.prototype.addControlClassesOnFields=function(i){var s,e,a=["vv-control","error","formError","messageError","wrapErrors","asyncWaiting"];for(e in this.config.selectors)this.config.selectors.hasOwnProperty(e)&&!this.includes(a,e)&&e!=this.config.selectors.control&&(s=t.getChildren("."+this.config.selectors[e]+":not(."+this.config.selectors.control+")",i),this.loopThroughFieldsToAddControls(s,i))},s.prototype.loopThroughFieldsToAddControls=function(t,i){if(t){var s,e,a=t.length;for(s=0;s<a;s++)(e=t[s]).classList.add(this.config.selectors.control),this.addCustomValidations(e),this.addAsyncValidations(e),this.config.validateOnFieldChanges&&this.addValidationsOnFieldsEvent(e,i)}},s.prototype.addValidationsOnFieldsEvent=function(t,i){if(t){var s=this;t.addEventListener("change",function(e){e.preventDefault(),s.validateAsync(t,i,!1),s.validateFields(t,i,!1)}),t.addEventListener("keyup",function(e){e.preventDefault(),s.validateFields(t,i,!1)})}},s.prototype.validateFields=function(t,i,s){var e,a,n,o,c,r=!0;return t&&i&&(t.classList.contains(this.config.selectors.async)||(this.removeValidationView(t),t.classList.contains(this.config.selectors.email)&&(this.factoryValidate(t,this.isEmail,this.config.messages.email,this.config.callbacks.emailError,this.config.callbacks.emailSuccess,null,i,s)||(r=!1)),t.classList.contains(this.config.selectors.phone)&&(this.factoryValidate(t,this.isPhone,this.config.messages.phone,this.config.callbacks.phoneError,this.config.callbacks.phoneSuccess,null,i,s)||(r=!1)),t.classList.contains(this.config.selectors.url)&&(this.factoryValidate(t,this.isUrl,this.config.messages.url,this.config.callbacks.urlError,this.config.callbacks.urlSuccess,null,i,s)||(r=!1)),t.classList.contains(this.config.selectors.date)&&(this.factoryValidate(t,this.isDate,this.config.messages.date,this.config.callbacks.dateError,this.config.callbacks.dateSuccess,null,i,s)||(r=!1)),t.classList.contains(this.config.selectors.currency)&&(this.factoryValidate(t,this.isCurrency,this.config.messages.currency,this.config.callbacks.currencyError,this.config.callbacks.currencySuccess,null,i,s)||(r=!1)),t.classList.contains(this.config.selectors.cep)&&(this.factoryValidate(t,this.isCep,this.config.messages.cep,this.config.callbacks.cepError,this.config.callbacks.cepSuccess,null,i,s)||(r=!1)),t.classList.contains(this.config.selectors.integer)&&(this.factoryValidate(t,this.isInteger,this.config.messages.integer,this.config.callbacks.integerError,this.config.callbacks.integerSuccess,null,i,s)||(r=!1)),t.classList.contains(this.config.selectors.digit)&&(this.factoryValidate(t,this.isDigit,this.config.messages.digit,this.config.callbacks.digitError,this.config.callbacks.digitSuccess,null,i,s)||(r=!1)),t.classList.contains(this.config.selectors.numeric)&&(this.factoryValidate(t,this.isNumeric,this.config.messages.numeric,this.config.callbacks.numericError,this.config.callbacks.numericSuccess,null,i,s)||(r=!1)),t.classList.contains(this.config.selectors.maxLength)&&(a=t.getAttribute("data-max-length")?parseInt(t.getAttribute("data-max-length")):this.config.customValidationsConfig.maxLength,this.factoryValidate(t,this.maxLength,this.config.messages.maxLength,this.config.callbacks.maxLengthError,this.config.callbacks.maxLengthSuccess,a,i,s)||(r=!1)),t.classList.contains(this.config.selectors.minLength)&&(e=t.getAttribute("data-min-length")?parseInt(t.getAttribute("data-min-length")):this.config.customValidationsConfig.minLength,this.factoryValidate(t,this.minLength,this.config.messages.minLength,this.config.callbacks.minLengthError,this.config.callbacks.minLengthSuccess,e,i,s)||(r=!1)),t.classList.contains(this.config.selectors.rangeLength)&&(n=[e=t.getAttribute("data-min-length")?parseInt(t.getAttribute("data-min-length")):this.config.customValidationsConfig.rangeLength.min,a=t.getAttribute("data-max-length")?parseInt(t.getAttribute("data-max-length")):this.config.customValidationsConfig.rangeLength.max],this.factoryValidate(t,this.rangeLength,this.config.messages.rangeLength,this.config.callbacks.rangeLengthError,this.config.callbacks.rangeLengthSuccess,n,i,s)||(r=!1)),t.classList.contains(this.config.selectors.sameLength)&&(o=t.getAttribute("data-same-length")?parseInt(t.getAttribute("data-same-length")):this.config.customValidationsConfig.sameLength,this.factoryValidate(t,this.sameLength,this.config.messages.sameLength,this.config.callbacks.sameLengthError,this.config.callbacks.sameLengthSuccess,o,i,s)||(r=!1)),t.classList.contains(this.config.selectors.max)&&(a=t.getAttribute("data-max")?parseInt(t.getAttribute("data-max")):this.config.customValidationsConfig.max,this.factoryValidate(t,this.isMax,this.config.messages.max,this.config.callbacks.maxError,this.config.callbacks.maxSuccess,a,i,s)||(r=!1)),t.classList.contains(this.config.selectors.min)&&(e=t.getAttribute("data-min")?parseInt(t.getAttribute("data-min")):this.config.customValidationsConfig.min,this.factoryValidate(t,this.isMin,this.config.messages.min,this.config.callbacks.minError,this.config.callbacks.minSuccess,e,i,s)||(r=!1)),t.classList.contains(this.config.selectors.range)&&(n=[e=t.getAttribute("data-min")?parseInt(t.getAttribute("data-min")):this.config.customValidationsConfig.range.min,a=t.getAttribute("data-max")?parseInt(t.getAttribute("data-max")):this.config.customValidationsConfig.range.max],this.factoryValidate(t,this.isRange,this.config.messages.range,this.config.callbacks.rangeError,this.config.callbacks.rangeSuccess,n,i,s)||(r=!1)),t.classList.contains(this.config.selectors.equalTo)&&(o=t.getAttribute("data-equal-to")?parseInt(t.getAttribute("data-equal-to")):this.config.customValidationsConfig.equalTo,this.factoryValidate(t,this.equalTo,this.config.messages.equalTo,this.config.callbacks.equalToError,this.config.callbacks.equalToSuccess,o,i,s)||(r=!1)),t.classList.contains(this.config.selectors.cpf)&&(this.factoryValidate(t,this.isCpf,this.config.messages.cpf,this.config.callbacks.cpfError,this.config.callbacks.cpfSuccess,null,i,s)||(r=!1)),t.classList.contains(this.config.selectors.cnpj)&&(this.factoryValidate(t,this.isCnpj,this.config.messages.cnpj,this.config.callbacks.cnpjError,this.config.callbacks.cnpjSuccess,null,i,s)||(r=!1)),t.classList.contains(this.config.selectors.cnh)&&(this.factoryValidate(t,this.isCnh,this.config.messages.cnh,this.config.callbacks.cnhError,this.config.callbacks.cnhSuccess,null,i,s)||(r=!1)),t.classList.contains(this.config.selectors.creditCard)&&(this.factoryValidate(t,this.isCreditCard,this.config.messages.creditCard,this.config.callbacks.creditCardError,this.config.callbacks.creditCardSuccess,null,i,s)||(r=!1)),t.classList.contains(this.config.selectors.hasExtension)&&(c=t.getAttribute("data-extensions")?t.getAttribute("data-extensions").split(","):this.config.customValidationsConfig.extensions,this.factoryValidate(t,this.hasExtension,this.config.messages.hasExtension,this.config.callbacks.hasExtension,this.config.callbacks.hasExtension,c,i,s)||(r=!1)),t.classList.contains(this.config.selectors.pattern)&&(this.validatePattern(t,i,s)||(r=!1)),t.classList.contains(this.config.selectors.customValidate)&&(this.validateCustom(t,i,s)||(r=!1)),t.classList.contains(this.config.selectors.required)&&("checkbox"===t.type||"radio"===t.type?this.validateRequiredCR(t,i)||(r=!1):this.factoryValidate(t,this.isNotEmpty,this.config.messages.required,this.config.callbacks.requiredError,this.config.callbacks.requiredSuccess,null,i,s)||(r=!1)))),r?this.callCallbackFunction(this.config.callbacks.eachFieldSuccess,this,t):this.callCallbackFunction(this.config.callbacks.eachFieldError,this,t),r},s.prototype.factoryValidate=function(t,i,s,e,a,n,o,c){return t&&!i.call(this,t.value,n)?(this.addValidationView(t,s),c&&this.config.showListOfValidations&&this.addListOfValidations(t,s,o),this.callCallbackFunction(e,this,t),!1):(this.callCallbackFunction(a,this,t),!0)},s.prototype.validateRequiredCR=function(i,s,e){if(i&&s&&i.name){var a=t.getChildren("."+this.config.selectors.required+"[name="+i.name+"]",s);if(a){var n=t.getChildren("."+this.config.selectors.required+"[name="+i.name+"]:checked",s),o=a[a.length-1];if(!n)return this.addValidationView(o,this.config.messages.required),e&&this.config.showListOfValidations&&this.addListOfValidations(i,this.config.messages.required,s),this.callCallbackFunction(this.config.callbacks.requiredError,this,i),!1;this.removeValidationView(o)}}return this.callCallbackFunction(this.config.callbacks.requiredSuccess,this,i),!0},s.prototype.validatePattern=function(t,i,s){if(t){var e=t.getAttribute("data-pattern")?t.getAttribute("data-pattern"):this.config.customValidationsConfig.pattern,a=t.getAttribute("data-flags")?t.getAttribute("data-flags"):this.config.customValidationsConfig.flags;return this.isPattern(t.value,e,a)?(this.callCallbackFunction(this.config.callbacks.patternSuccess,this,t),!0):(this.addValidationView(t,this.config.messages.pattern),s&&this.config.showListOfValidations&&this.addListOfValidations(t,this.config.messages.pattern,i),this.callCallbackFunction(this.config.callbacks.patternError,this,t),!1)}},s.prototype.validateCustom=function(t,i,s){var e=!0;if(t){var a=t.getAttribute("data-validate-key");if(a){var n=this.config.customValidates[a];if(!(n&&n.message&&n.fn))throw new TypeError("Check if your custom validation is correctly configured");if(!this.isFunction(n.fn))throw new TypeError("The fn of custom validation must be a function");n.fn.call(this,t,i,s)||(this.addValidationView(t,n.message),s&&this.config.showListOfValidations&&this.addListOfValidations(t,n.message,i),e=!1)}}return e},s.prototype.validateAsync=function(t,i,s){if(t&&t.classList.contains(this.config.selectors.async)&&i){var e=t.getAttribute("data-async-key");if(e){var a=this.config.asyncValidates[e];if(!(a&&a.message&&a.fn))throw new TypeError("Check if your custom async validation is correctly configured");if(!this.isFunction(a.fn))throw new TypeError("The fn of custom async validation must be a function");t.getAttribute("data-validation-status")&&s&&!0===this.config.validateOnFieldChanges||a.fn.call(this,t,a.message,i,s),s&&this.config.showListOfValidations&&t.classList.contains(this.config.selectors.error)&&this.addListOfValidations(t,a.message,i)}}},s.prototype.addListOfValidations=function(i,s,e){if(i&&e)if(s=i.getAttribute("data-message-error")?i.getAttribute("data-message-error"):s,this.config.customListErrors&&this.isFunction(this.config.customListErrors.add))this.config.customListErrors.add.call(this,i,s,e);else{var a=t.getChild("."+this.config.selectors.wrapErrors,e);if(a){var n=this.getListOfValidationsContainer(a),o=document.createElement("LI");t.inner(o,s),n.appendChild(o)}}},s.prototype.getListOfValidationsContainer=function(i){if(i&&"UL"!==i.tagName){var s=t.getChild("ul",i);if(!s){var e=document.createElement("UL");i.appendChild(e),s=t.getChild("ul",i)}return s}return i},s.prototype.removeListOfValidations=function(i){if(i)if(this.config.customListErrors&&this.isFunction(this.config.customListErrors.remove))this.config.customListErrors.remove.call(this,i);else{var s=t.getChild("."+this.config.selectors.wrapErrors,i);t.inner(s)}},s.prototype.addValidationView=function(i,s,e){if(i){isAsyncStart||(s=i.getAttribute("data-message-error")?i.getAttribute("data-message-error"):s);var a=e||this.config.selectors.messageError;if(this.config.customViewErrors&&this.isFunction(this.config.customViewErrors.add))this.config.customViewErrors.add.call(this,i,s,a);else{var n=this.isArray(i)?i[i.length-1].parentElement:i.parentElement;if(n){var o=document.createElement("SPAN");if(messageClass=document.createAttribute("class"),t.inner(o,s),messageClass.value=a,o.setAttributeNode(messageClass),this.isArray(i)){var c,r=i.length;for(c=1;c<r;c++)i[c].classList.add(this.config.selectors.error)}else i.classList.add(this.config.selectors.error);var l=t.getChild("."+this.config.selectors.messageError,n);l&&l.remove(),n.append(o)}}}},s.prototype.removeValidationView=function(i,s){if(i){var e=s||this.config.selectors.messageError;if(this.config.customViewErrors&&this.isFunction(this.config.customViewErrors.remove))this.config.customViewErrors.remove.call(this,i,e);else{var a=this.isArray(i)?i[i.length-1].parentElement:i.parentElement;if(a){if(this.isArray(i)){var n,o=i.length;for(n=1;n<o;n++)i[n].classList.remove(this.config.selectors.error)}else i.classList.remove(this.config.selectors.error);var c=e,r=t.getChild("."+c,a);r&&r.remove()}}}},s.prototype.addCustomValidations=function(t){if(t){var i=t.getAttribute("data-validate-key");if(i)this.config.customValidates[i]||(this.config.customValidates[i]=this.userConfig.customValidates[i])}},s.prototype.addAsyncValidations=function(t){if(t){var i=t.getAttribute("data-async-key");if(i)this.config.asyncValidates[i]||(this.config.asyncValidates[i]=this.userConfig.asyncValidates[i])}},s.prototype.asyncValidationStart=function(t,i,s){t&&s&&(s.setAttribute("data-validation-status","waiting"),t.setAttribute("data-validation-status","waiting"),this.removeValidationView(t,this.config.selectors.asyncWaiting),this.addValidationView(t,i,this.config.selectors.asyncWaiting,!0))},s.prototype.asyncValidationFinish=function(t,i,s,e){if(t){var a=e?"valid":"invalid";t.setAttribute("data-validation-status",a),this.removeValidationView(t,this.config.selectors.asyncWaiting),e||this.addValidationView(t,i),this.asyncContainerHasErrors(s)?s.setAttribute("data-validation-status","invalid"):s.setAttribute("data-validation-status","valid")}},s.prototype.asyncContainerHasErrors=function(i){if(i){var s=t.getChildren("."+this.config.selectors.async+"."+this.config.selectors.error,i);if(s&&s.length>0)return!0}return!1},s.prototype.callCallbackFunction=function(t,i,s,e){this.isFunction(t)&&t.call(i,s,e)},s.prototype.setHTML5NoValidate=function(t){this.config.novalidateHTML5&&t&&this.isHTMLForm(t)&&t.setAttribute("novalidate",!0)},s.prototype.mergeObjectsDeeply=function(t,i,s){var e;if(this.isObject(i)&&this.isObject(s)&&this.isObject(t))for(e in i)i.hasOwnProperty(e)&&(this.isObject(i[e])&&this.isObject(i[e])?(t[e]=i[e],this.mergeObjectsDeeply(t[e],i[e],s[e])):void 0!==s[e]?t[e]=s[e]:t[e]=i[e]);return t},s.prototype.init=function(){this.containers=t.getElements(this.config.container),this.loopThroughContainers()},s}();